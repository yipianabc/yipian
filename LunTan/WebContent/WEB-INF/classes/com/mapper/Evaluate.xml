<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.EvaluateMapper">
  <resultMap id="BaseResultMap" type="com.model.Evaluate">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 28 21:14:50 CST 2018.
    -->
    <id column="eid" jdbcType="INTEGER" property="eid" />
    <result column="pid" jdbcType="INTEGER" property="pid" />
    <result column="userid" jdbcType="INTEGER" property="userid" />
    <result column="etitle" jdbcType="VARCHAR" property="etitle" />
    <result column="econtent" jdbcType="VARCHAR" property="econtent" />
    <result column="etime" jdbcType="DATE" property="etime" />
    <result column="eimage" jdbcType="VARCHAR" property="eimage" />
  </resultMap>
  
  <select id="findEvaSize" parameterType="int" resultType="int">
	select count(*) from evaluate where pid = #{pid}
  </select>
  
  <select id="findEvaSizeByUid" parameterType="int" resultType="int">
	select count(*) from evaluate where userid = #{userid}
  </select>
  
  <!-- 根据分页数据start 和size查询数据 -->
	<select id="findByPage" parameterType="Map" resultMap="BaseResultMap">
		select * from evaluate where pid = #{pid} limit #{start},#{size}
	</select>
	
	<!-- 根据分页数据start 和size查询数据 -->
	<select id="searchEvaByUidByPage" parameterType="Map" resultMap="BaseResultMap">
		select * from evaluate where userid = #{userid} limit #{start},#{size}
	</select>
  
  <insert id="insertEvaluate" parameterType="com.model.Evaluate">
  	 INSERT into evaluate (pid, userid, etitle, econtent) VALUES (#{pid}, #{userid}, #{etitle}, #{econtent})
  </insert>
  
  <select id="findEvaluate" parameterType="int" resultMap="BaseResultMap">
	select * from evaluate where eid = #{eid}
  </select>
  
  <select id="searchEvaByPid" parameterType="int" resultMap="BaseResultMap">
	select * from evaluate where pid = #{pid}
  </select>
  
  <select id="searchEvaByUid" parameterType="int" resultMap="BaseResultMap">
	select * from evaluate where userid = #{userid}
  </select>
  
  
  <delete id="deleteEva" parameterType="int">
  	DELETE FROM evaluate WHERE eid = #{eid}
  </delete>
  
  <delete id="deleteEvaByPid" parameterType="int">
  	DELETE FROM evaluate WHERE pid = #{pid}
  </delete>
  
</mapper>
