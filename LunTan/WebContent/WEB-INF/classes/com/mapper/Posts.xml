<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.PostsMapper">
  <resultMap id="BaseResultMap" type="com.model.Posts">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 28 21:14:50 CST 2018.
    -->
    <id column="pid" jdbcType="INTEGER" property="pid" />
    <result column="ptitle" jdbcType="VARCHAR" property="ptitle" />
    <result column="pcontent" jdbcType="VARCHAR" property="pcontent" />
    <result column="ptime" jdbcType="TIMESTAMP" property="ptime" />
    <result column="pimage" jdbcType="VARCHAR" property="pimage" />
    <result column="userid" jdbcType="INTEGER" property="userid" />
  </resultMap>
  
  
  <select id="findAll" resultMap="BaseResultMap">
	select * from posts
  </select>
  
  <insert id="insertPost" parameterType="com.model.Posts">
  	 INSERT into posts (ptitle, pcontent, userid) VALUES (#{ptitle}, #{pcontent}, #{userid})
  </insert>
  
  <select id="searchPostByPt" parameterType="com.model.Posts" resultMap="BaseResultMap">
	select * from posts where ptitle like "%"#{ptitle}"%"
  </select>
  
  <select id="findPostSizeByUid" parameterType="int" resultType="int">
	select count(*) from posts where userid = #{userid}
  </select>
  
  <!-- 根据分页数据start 和size查询数据 -->
	<select id="findByPage" parameterType="Map" resultMap="BaseResultMap">
		select * from posts order by pid limit #{start},#{size}
	</select>
	
	<select id="findPostsSize" resultType="int">
	select count(*) from posts
  </select>
  <!-- 根据分页数据start 和size查询数据 -->
	<select id="searchPostByUidByPage" parameterType="Map" resultMap="BaseResultMap">
		select * from posts where userid = #{userid} limit #{start},#{size}
	</select>
  
  
  <select id="searchPostByPid" parameterType="int" resultMap="BaseResultMap">
	select * from posts where pid = #{pid}
  </select>
  
  <select id="searchPostByUid" parameterType="int" resultMap="BaseResultMap">
	select * from posts where  userid = #{userid}
  </select>
  
  <delete id="deletePost" parameterType="int">
  	DELETE FROM posts WHERE pid = #{pid}
  </delete>
</mapper>